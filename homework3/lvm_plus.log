Script started on Sun 10 Feb 2019 07:27:21 AM UTC
]0;vagrant@lvm:~[?1034h[vagrant@lvm ~]$ ll
total 0
-rw-rw-r--. 1 vagrant vagrant 0 Feb 10 07:27 lvm_record.log
]0;vagrant@lvm:~[vagrant@lvm ~]$ pvcreate /dev/sdb
  WARNING: Running as a non-root user. Functionality may be unavailable.
  /run/lvm/lvmetad.socket: access failed: Permission denied
  WARNING: Failed to connect to lvmetad. Falling back to device scanning.
  /run/lock/lvm/P_orphans:aux: open failed: Permission denied
  Can't get lock for orphan PVs.
]0;vagrant@lvm:~[vagrant@lvm ~]$ sudo su
]0;root@lvm:/home/vagrant[?1034h[root@lvm vagrant]# pvcreate /dev/sdb
  Physical volume "/dev/sdb" successfully created.
]0;root@lvm:/home/vagrant[root@lvm vagrant]# vgcreate vg_opt /dev/sdb
  Volume group "vg_opt" successfully created
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lvcreate -n lv_opt -l 80%FREE /dev/vg_opt
WARNING: xfs signature detected on /dev/vg_opt/lv_opt at offset 0. Wipe it? [y/n]: y
  Wiping xfs signature on /dev/vg_opt/lv_opt.
  Logical volume "lv_opt" created.
]0;root@lvm:/home/vagrant[root@lvm vagrant]# mkfs.btrfs /dev/vg_opt/lv_opt
btrfs-progs v4.9.1
See http://btrfs.wiki.kernel.org for more information.

Label:              (null)
UUID:               e317a34b-b5f1-439a-ae7b-be1dccb6dba6
Node size:          16384
Sector size:        4096
Filesystem size:    8.00GiB
Block group profiles:
  Data:             single            8.00MiB
  Metadata:         DUP             409.38MiB
  System:           DUP               8.00MiB
SSD detected:       no
Incompat features:  extref, skinny-metadata
Number of devices:  1
Devices:
   ID        SIZE  PATH
    1     8.00GiB  /dev/vg_opt/lv_opt

]0;root@lvm:/home/vagrant[root@lvm vagrant]# umount /opt
umount: /opt: not mounted
]0;root@lvm:/home/vagrant[root@lvm vagrant]# mount /dev/vg_opt/lv_opt /opt
]0;root@lvm:/home/vagrant[root@lvm vagrant]# echo "`blkid | grep opt | awk '{print $2}'` /opt btrfs defaults 0 0" >> /etc/fstab
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lvcreate -L 500MB -s -n opt_snap /dev/vg_opt/lv_opt
  Logical volume "opt_snap" created.
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lvcreate -n lvol0 -L 100G vg /dev/slow[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K–¥–º—Å–∫—É[K[K[K[K[Klvcreate - [Kn cha[K[Kachefs -L 1G /dev/vg)o[K[K[Kg_opy[Kt
  Logical volume "cachefs" created.
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lvcreate -n cachefs -L 1G /dev/vg_opt[C[1P /dev/vg_opt1 /dev/vg_opt6 /dev/vg_opt[1P[CM /dev/vg_opt[C[1@m[1@e[1@t[1@a
  Logical volume "cachefsmeta" created.
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lvs -a vg
  Volume group "vg" not found
  Cannot process volume group vg
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lvs -a vg[K[K[K
  LV                VG         Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  LogVol00          VolGroup00 -wi-ao----   8.00g                                                    
  LogVol01          VolGroup00 -wi-ao----   1.50g                                                    
  LogVol_Home       VolGroup00 -wi-ao----   2.00g                                                    
  cachefs           vg_opt     -wi-a-----   1.00g                                                    
  cachefsmeta       vg_opt     -wi-a-----  16.00m                                                    
  lv_opt            vg_opt     owi-aos---  <8.00g                                                    
  opt_snap          vg_opt     swi-a-s--- 500.00m      lv_opt 0.00                                   
  lv_var            vg_var     rwi-aor--- 952.00m                                    100.00          
  [lv_var_rimage_0] vg_var     iwi-aor--- 952.00m                                                    
  [lv_var_rimage_1] vg_var     iwi-aor--- 952.00m                                                    
  [lv_var_rmeta_0]  vg_var     ewi-aor---   4.00m                                                    
  [lv_var_rmeta_1]  vg_var     ewi-aor---   4.00m                                                    
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lvconvert --tyoe cache-pool --poolmetadata /dev/vg_opt/cachefsmeta /dev/vg_opt/cachefs
lvconvert: unrecognized option '--tyoe'
  Error during parsing of command line.
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lvconvert --tyoe cache-pool --poolmetadata /dev/vg_opt/cachefsmeta /dev/vg_opt/cachefs[1P[1@p
  WARNING: Converting vg_opt/cachefs and vg_opt/cachefsmeta to cache pool's data and metadata volumes with metadata wiping.
  THIS WILL DESTROY CONTENT OF LOGICAL VOLUME (filesystem etc.)
Do you really want to convert vg_opt/cachefs and vg_opt/cachefsmeta? [y/n]: y
  Converted vg_opt/cachefs and vg_opt/cachefsmeta to cache pool.
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lvconvert --type cache --ch[Kachepook[Kl /v[Kdev/vg_opt/cachefs /ev[K[Kdev/o[Kvg_opt/lv-[K_opt 
Do you want wipe existing metadata of cache pool vg_opt/cachefs? [y/n]: y
  Logical volume vg_opt/lv_opt is now cached.
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lsblk
NAME                       MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                          8:0    0   40G  0 disk 
‚îú‚îÄsda1                       8:1    0    1M  0 part 
‚îú‚îÄsda2                       8:2    0    1G  0 part /boot
‚îî‚îÄsda3                       8:3    0   39G  0 part 
  ‚îú‚îÄVolGroup00-LogVol00    253:0    0    8G  0 lvm  /
  ‚îú‚îÄVolGroup00-LogVol01    253:1    0  1.5G  0 lvm  [SWAP]
  ‚îî‚îÄVolGroup00-LogVol_Home 253:7    0    2G  0 lvm  /home
sdb                          8:16   0   10G  0 disk 
‚îú‚îÄvg_opt-opt_snap-cow      253:10   0  500M  0 lvm  
‚îÇ ‚îî‚îÄvg_opt-opt_snap        253:11   0    8G  0 lvm  /opt
‚îú‚îÄvg_opt-cachefs_cdata     253:12   0    1G  0 lvm  
‚îÇ ‚îî‚îÄvg_opt-lv_opt-real     253:9    0    8G  0 lvm  
‚îÇ   ‚îú‚îÄvg_opt-lv_opt        253:8    0    8G  0 lvm  
‚îÇ   ‚îî‚îÄvg_opt-opt_snap      253:11   0    8G  0 lvm  /opt
‚îú‚îÄvg_opt-cachefs_cmeta     253:13   0   16M  0 lvm  
‚îÇ ‚îî‚îÄvg_opt-lv_opt-real     253:9    0    8G  0 lvm  
‚îÇ   ‚îú‚îÄvg_opt-lv_opt        253:8    0    8G  0 lvm  
‚îÇ   ‚îî‚îÄvg_opt-opt_snap      253:11   0    8G  0 lvm  /opt
‚îî‚îÄvg_opt-lv_opt_corig      253:14   0    8G  0 lvm  
  ‚îî‚îÄvg_opt-lv_opt-real     253:9    0    8G  0 lvm  
    ‚îú‚îÄvg_opt-lv_opt        253:8    0    8G  0 lvm  
    ‚îî‚îÄvg_opt-opt_snap      253:11   0    8G  0 lvm  /opt
sdc                          8:32   0    2G  0 disk 
‚îú‚îÄvg_var-lv_var_rmeta_0    253:2    0    4M  0 lvm  
‚îÇ ‚îî‚îÄvg_var-lv_var          253:6    0  952M  0 lvm  /var
‚îî‚îÄvg_var-lv_var_rimage_0   253:3    0  952M  0 lvm  
  ‚îî‚îÄvg_var-lv_var          253:6    0  952M  0 lvm  /var
sdd                          8:48   0    1G  0 disk 
‚îú‚îÄvg_var-lv_var_rmeta_1    253:4    0    4M  0 lvm  
‚îÇ ‚îî‚îÄvg_var-lv_var          253:6    0  952M  0 lvm  /var
‚îî‚îÄvg_var-lv_var_rimage_1   253:5    0  952M  0 lvm  
  ‚îî‚îÄvg_var-lv_var          253:6    0  952M  0 lvm  /var
sde                          8:64   0    1G  0 disk 
]0;root@lvm:/home/vagrant[root@lvm vagrant]# lvs
  LV          VG         Attr       LSize   Pool      Origin         Data%  Meta%  Move Log Cpy%Sync Convert
  LogVol00    VolGroup00 -wi-ao----   8.00g                                                                 
  LogVol01    VolGroup00 -wi-ao----   1.50g                                                                 
  LogVol_Home VolGroup00 -wi-ao----   2.00g                                                                 
  lv_opt      vg_opt     owi-aoC---  <8.00g [cachefs] [lv_opt_corig] 0.06   1.07            0.00            
  opt_snap    vg_opt     swi-a-s--- 500.00m           lv_opt         0.00                                   
  lv_var      vg_var     rwi-aor--- 952.00m                                                 100.00          
]0;root@lvm:/home/vagrant[root@lvm vagrant]# vgs
  VG         #PV #LV #SN Attr   VSize   VFree  
  VolGroup00   1   3   0 wz--n- <38.97g <27.47g
  vg_opt       1   2   1 wz--n- <10.00g 492.00m
  vg_var       2   1   0 wz--n-   2.99g   1.12g
]0;root@lvm:/home/vagrant[root@lvm vagrant]# pvs
  PV         VG         Fmt  Attr PSize    PFree  
  /dev/sda3  VolGroup00 lvm2 a--   <38.97g <27.47g
  /dev/sdb   vg_opt     lvm2 a--   <10.00g 492.00m
  /dev/sdc   vg_var     lvm2 a--    <2.00g   1.06g
  /dev/sdd   vg_var     lvm2 a--  1020.00m  64.00m
]0;root@lvm:/home/vagrant[root@lvm vagrant]# exit
exit
]0;vagrant@lvm:~[vagrant@lvm ~]$ exit
exit

Script done on Sun 10 Feb 2019 07:45:30 AM UTC
